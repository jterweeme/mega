#ifndef _MEGA_H_
#define _MEGA_H_
#include <stdint.h>

static constexpr uint8_t
    porta_base = 0x20,
        pina = porta_base,
            pina0 = 0, pina1 = 1, pina2 = 2, pina3 = 3,
            pina4 = 4, pina5 = 5, pina6 = 6, pina7 = 7,
        ddra = porta_base + 1,
        porta = porta_base + 2,
    portb_base = 0x23,
        pinb = portb_base,
            pinb0 = 0, pinb1 = 1, pinb2 = 2, pinb3 = 3,
            pinb4 = 4, pinb5 = 5, pinb6 = 6, pinb7 = 7,
        ddrb = portb_base + 1,
            ddb0 = 0, ddb1 = 1, ddb2 = 2, ddb3 = 3, ddb4 = 4, ddb5 = 5, ddb6 = 6, ddb7 = 7,
        portb = portb_base + 2,
            portb0 = 0, portb1 = 1, portb2 = 2, portb3 = 3,
            portb4 = 4, portb5 = 5, portb6 = 6, portb7 = 7,
        pb0 = 0, pb1 = 1, pb2 = 2, pb3 = 3, pb4 = 4, pb5 = 5, pb6 = 6, pb7 = 7,
    pinc = 0x26,
    pind = 0x29,
    ddrd = 0x2a, ddd0 = 0, ddd1 = 1, ddd2 = 2, ddd3 = 3, ddd4 = 4, ddd5 = 5, ddd6 = 6, ddd7 = 7,
    porte_base = 0x2c,
        pine = porte_base,
        ddre = porte_base + 1,
        porte = porte_base + 2,
            porte0 = 0, porte1 = 1, porte2 = 2, porte3 = 3,
            porte4 = 4, porte5 = 5, porte6 = 6, porte7 = 7,
        pe0 = 0, pe1 = 1, pe2 = 2, pe3 = 3, pe4 = 4, pe5 = 5, pe6 = 6, pe7 = 7,
    portf_base = 0x2f,
        pinf = portf_base,
        ddrf = portf_base + 1,
        portf = portf_base + 2,
            portf0 = 0, portf1 = 1, portf2 = 2, portf3 = 3,
            portf4 = 4, portf5 = 5, portf6 = 6, portf7 = 7,
        pf0 = 0, pf1 = 1, pf2 = 2, pf3 = 3, pf4 = 4, pf5 = 5, pf6 = 6, pf7 = 7,
    tifr1 = 0x36, icf1 = 5, ocf1c = 3, ocf1b = 2, ocf1a = 1, tov1 = 0,
    tifr2 = 0x37, ocf2b = 2, ocf2a = 1, tov2 = 0,
    tifr3 = 0x38,
    timsk0 = 0x6e, ocie0b = 2, ocie0a = 1, toie0 = 0,
    timsk1 = 0x6f, icie1 = 5, ocie1c = 3, ocie1b = 2, ocie1a = 1, toie1 = 0,
    timsk2 = 0x70, ocie2b = 2, ocie2a = 1, toie2 = 0,
    timsk3 = 0x71,
    timsk4 = 0x72,
    tccr1a = 0x80,
        com1a1 = 7, com1a0 = 6, com1b1 = 5, com1b0 = 4,
        com1c1 = 3, com1c0 = 2, wgm11 = 1, wgm10 = 0,
    tccr1b = 0x81, icnc1 = 7, ices1 = 6, wgm13 = 4, wgm12 = 3, cs12 = 2, cs11 = 1, cs10 = 0,
    tccr1c = 0x82, foc1a = 7, foc1b = 6, foc1c = 5,
    tcnt1 = 0x84, tcnt1l = 0x84, tcnt1h = 0x85,
    icr1 = 0x86, icr1l = 0x86, icr1h = 0x87,
    ocr1a = 0x88, ocr1al = 0x88, ocr1ah = 0x89,
    ocr1b = 0x8a, ocr1bl = 0x8a, ocr1bh = 0x8b,
    ocr1c = 0x8c, ocr1cl = 0x8c, ocr1ch = 0x8d,
    tccr3a = 0x90,
        com3a1 = 7, com3a0 = 6, com3b1 = 5, com3b0 = 4,
        com3c1 = 3, com3c0 = 2, wgm31 = 1, wgm30 = 0,
    tccr3b = 0x91,
    tccr3c = 0x92, foc3a = 7, foc3b = 6, foc3c = 5,
    tcnt3 = 0x94, tcnt3l = 0x94, tcnt3h = 0x95,
    icr3 = 0x96, icr3l = 0x96, icr3h = 0x97,
    ocr3a = 0x98, ocr3al = 0x98, ocr3ah = 0x99,
    tccr2a = 0xb0, com2a1 = 7, com2a0 = 6, com2b1 = 5, com2b0 = 4, wgm21 = 1, wgm20 = 0,
    tccr2b = 0xb1, foc2a = 7, foc2b = 6, wgm22 = 3, cs22 = 2, cs21 = 1, cs20 = 0,
    tcnt2 = 0xb2,
    ocr2a = 0xb3,
    ocr2b = 0xb4,
    assr = 0xb6,
    twbr = 0xb8,
    twsr = 0xb9,
    twar = 0xba,
    ucsr0a = 0xc0,
        rxc0 = 7, txc0 = 6, udre0 = 5, fe0 = 4, dor0 = 3, upe0 = 2, mpcm0 = 0, u2x0 = 1,
    ucsr0b = 0xc1,
        txb80 = 0, rxb80 = 1, ucxz02 = 2, txen0 = 3,
        rxen0 = 4, udrie0 = 5, txcie0 = 6, rxcie0 = 7,
    ucsr0c = 0xc2,
        umsel01 = 7, umsel00 = 6, upm01 = 5, upm00 = 4,
        usbs0 = 3, ucsz01 = 2, ucsz00 = 1, ucpol0 = 0,
    ubrr0 = 0xc4,
    ubrr0l = 0xc4,
    ubrr0h = 0xc5,
    udr0 = 0xc6,
    ucsr1a = 0xc8,
        rxc1 = 7, txc1 = 6, udre1 = 5, fe1 = 4, dor1 = 3, upe1 = 2, u2x1 = 1, mpcm1 = 0,
    ucsr1b = 0xc9,
        rxcie1 = 7, txcie1 = 6, udrie1 = 5, rxen1 = 4,
        txen1 = 3, ucsz12 = 2, rxb81 = 1, txb81 = 0,
    ucsr1c = 0xca,
        umsel11 = 7, umsel10 = 6, upm11 = 5, upm10 = 4,
        usbs1 = 3, ucsz11 = 2, ucsz10 = 1, ucpol1 = 0,
    ubrr1 = 0xcc, ubrr1l = 0xcc, ubrr1h = 0xcd,
    udr1 = 0xce,

    ocr1a_port_base = portb_base,
    ocr1a_ddr = ocr1a_port_base + 1,
    ocr1a_port = ocr1a_port_base + 2,
    ocr1a_bit = pb5,
    ocr1b_port_base = portb_base,
    ocr1b_ddr = ocr1b_port_base + 1,
    ocr1b_port = ocr1b_port_base + 2,
    ocr1b_bit = pb6,
    ph6 = 6,
    ocr2b_bit = ph6,
    ss_port_base = portb_base,
    ss_ddr = ss_port_base + 1,
    ss_port = ss_port_base + 2,
    pss = pb0,
    sck_port_base = portb_base,
    sck_ddr = sck_port_base + 1,
    sck_port = sck_port_base + 2,
    psck = pb1,
    mosi_port_base = portb_base,
    mosi_ddr = mosi_port_base + 1,
    mosi_port = mosi_port_base + 2,
    pmosi = pb2,
    miso_port_base = portb_base,
    miso_ddr = miso_port_base + 1,
    miso_port = miso_port_base + 2,
    pmiso = pb3;

static constexpr uint16_t
    porth_base = 0x100,
        pinh = porth_base,
        ddrh = porth_base + 1,
            ddh7 = 7, ddh6 = 6, ddh5 = 5, ddh4 = 4, ddh3 = 3, ddh2 = 2, ddh1 = 1, ddh0 = 0,
        porth = 0x102,
    portj_base = 0x103,
    portk_base = 0x106,
    portl_base = 0x109,

    ocr2b_port_base = porth_base,
    ocr2b_ddr = ocr2b_port_base + 1,
    ocr2b_port = ocr2b_port_base + 2;

static volatile uint8_t
    *p_pinb = (volatile uint8_t * const)pinb,
    *p_ddrb = (volatile uint8_t * const)ddrb,
    *p_ddrd = (volatile uint8_t * const)ddrd,
    *p_tifr1 = (volatile uint8_t * const)tifr1,
    *p_tifr2 = (volatile uint8_t * const)tifr2,
    *p_tifr3 = (volatile uint8_t * const)tifr3,
    *p_timsk0 = (volatile uint8_t * const)timsk0,
    *p_timsk1 = (volatile uint8_t * const)timsk1,
    *p_timsk2 = (volatile uint8_t * const)timsk2,
    *p_timsk3 = (volatile uint8_t * const)timsk3,
    *p_timsk4 = (volatile uint8_t * const)timsk4,
    *ptccr1a = (volatile uint8_t * const)tccr1a,
    *ptccr1b = (volatile uint8_t * const)tccr1b,
    *ptccr3a = (volatile uint8_t * const)tccr3a,
    *picr3 = (volatile uint8_t * const)icr3,
    *p_tccr2a = (volatile uint8_t * const)tccr2a,
    *p_tccr2b = (volatile uint8_t * const)tccr2b,
    *p_ocr2a = (volatile uint8_t * const)ocr2a,
    *p_ocr2b = (volatile uint8_t * const)ocr2b,
    *p_ddrh = (volatile uint8_t * const)ddrh,
    *p_ucsr1a = (volatile uint8_t * const)ucsr1a,
    *p_ucsr1b = (volatile uint8_t * const)ucsr1b,
    *p_ucsr1c = (volatile uint8_t * const)ucsr1c,
    *p_ubrr1 = (volatile uint8_t * const)ubrr1,
    *p_udr1 = (volatile uint8_t * const)udr1,

    * const p_ddr_ocr1a = (volatile uint8_t * const)ocr1a_ddr,
    * const p_ddr_ocr1b = (volatile uint8_t * const)ocr1b_ddr,
    * const p_ddr_ocr2b = (volatile uint8_t * const)ocr2b_ddr,
    * const p_ddr_ss = (volatile uint8_t * const)ss_ddr,
    * const p_port_ss = (volatile uint8_t * const)ss_port,
    * const p_ddr_sck = (volatile uint8_t * const)sck_ddr,
    * const p_port_sck = (volatile uint8_t * const)sck_port,
    * const p_ddr_mosi = (volatile uint8_t * const)mosi_ddr,
    * const p_port_mosi = (volatile uint8_t * const)mosi_port,
    * const p_ddr_miso = (volatile uint8_t * const)miso_ddr,
    * const p_port_miso = (volatile uint8_t * const)miso_port;

static volatile uint16_t
    *pocr1a = (volatile uint16_t * const)ocr1a,
    *pocr1b = (volatile uint16_t * const)ocr1b,
    *pocr1c = (volatile uint16_t * const)ocr1c;
#endif


